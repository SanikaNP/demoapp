<div>
  <h2>Department Management</h2>
  <button (click)="openAddDepartmentModal(addDepartmentModal)">Add Department</button>
  
  <table>
    <tr>
      <th>Department Name</th>
      <th>Short Description</th>
      <th>Number of Employees</th>
      <th>Actions</th>
    </tr>
    <tr *ngFor="let department of departments">
      <td (click)="openEditDepartmentModal(editDepartmentModal, department)">{{ department.name }}</td>
      <td>{{ department.shortDescription }}</td>
      <td>{{ department.numberOfEmployees }}</td>
      <td>
        <button (click)="deleteDepartment(department.id!)">Delete</button>
      </td>
    </tr>
  </table>

  <!-- Add Department Modal -->
  <ng-template #addDepartmentModal let-modal>
    <div class="modal-header">
      <h4 class="modal-title">Add Department</h4>
      <button type="button" class="close" (click)="modal.dismiss('Cross click')">&times;</button>
    </div>
    <div class="modal-body">
      <form #departmentForm="ngForm" (ngSubmit)="saveDepartment(departmentForm.value)">
        <div>
          <label>Department Name:</label>
          <input type="text" name="name" [(ngModel)]="newDepartment.name" placeholder="Department Name" required maxlength="200" />
        </div>
        <div>
          <label>Short Description:</label>
          <textarea name="description" [(ngModel)]="newDepartment.shortDescription" placeholder="Short Description"></textarea>
        </div>
        <button type="submit">Save</button>
        <button type="button" (click)="modal.dismiss('Close click')">Cancel</button>
      </form>
    </div>
  </ng-template>

  <!-- Edit Department Modal -->
  <ng-template #editDepartmentModal let-modal>
    <div class="modal-header">
      <h4 class="modal-title">Edit Department</h4>
      <button type="button" class="close" (click)="modal.dismiss('Cross click')">&times;</button>
    </div>
    <div class="modal-body">
      <form #departmentForm="ngForm" (ngSubmit)="saveDepartment(departmentForm.value)">
        <div>
          <label>Department Name:</label>
          <input type="text" name="name" [(ngModel)]="selectedDepartment.name" placeholder="Department Name" required maxlength="200" />
        </div>
        <div>
          <label>Short Description:</label>
          <textarea name="description" [(ngModel)]="selectedDepartment.shortDescription" placeholder="Short Description"></textarea>
        </div>
        <button type="submit">Save</button>
        <button type="button" (click)="modal.dismiss('Close click')">Cancel</button>
      </form>
    </div>
  </ng-template>
</div>
